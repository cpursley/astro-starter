---
import { useTranslations } from "@/i18n";
import BaseLayout from "@layouts/BaseLayout.astro";
import BlogPost from "@/components/BlogPost.astro";
// import Tags from "../components/Tags.astro";

const allPosts = await Astro.glob("../blog/posts/*.md");
const tags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())];
const t = useTranslations();

const metaProps = {
    siteName: t("siteMetadata.title"),
    pageTitle: t("pages.blog.title"),
    pageDescription: t("pages.blog.description"),
    pageUrl: t("siteMetadata.url") + "blog",
};
---

<BaseLayout {...metaProps}>
    <div class="container mx-auto">
        <h1 class="text-2xl md:text-3xl font-bold text-blue-600 mb-6">
            {metaProps.pageTitle}
        </h1>
        <p class="text-xl text-gray-700 mb-8">{metaProps.pageDescription}</p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
            {
                allPosts.map((post) => (
                    <BlogPost url={post.url} title={post.frontmatter.title} />
                ))
            }
        </div>

        <div class="flex justify-center items-center space-x-2 mb-12">
            {
                [1, 2, 3, 4, 5].map((page) => (
                    <a
                        href="#"
                        class={`px-3 py-1 rounded ${page === 1 ? "bg-blue-600 text-white" : "bg-gray-200 text-gray-700"} hover:bg-blue-500 hover:text-white transition`}
                    >
                        {page}
                    </a>
                ))
            }
        </div>

        <div class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Tags</h2>
            <div class="flex flex-wrap gap-2">
                {
                    tags.map((tag) => (
                        <a
                            href={`/blog/tags/${tag}`}
                            class="px-3 py-1 bg-gray-200 text-gray-700 rounded-full hover:bg-blue-500 hover:text-white transition"
                        >
                            {tag}
                        </a>
                    ))
                }
            </div>
        </div>
    </div>
</BaseLayout>
